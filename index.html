<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeCoding Lecture</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }

        .main-container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 600px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .tab-button {
            background-color: #eee;
            color: #333;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            border-radius: 10px;
            margin: 0 5px;
        }

        .tab-button.active {
            background-color: #4285f4;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        h1 {
            margin: 0 0 20px 0;
            color: #333;
        }

        /* Lotto Generator Styles */
        .controls {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: bold;
            color: #555;
        }

        select {
            padding: 5px 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .result-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
            min-height: 150px;
            justify-content: center;
        }

        .lotto-row {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #eee;
            border-radius: 10px;
        }

        .row-label {
            font-size: 18px;
            font-weight: bold;
            color: #4285f4;
            margin-right: 15px;
            min-width: 20px;
        }

        .balls-wrapper {
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }

        .ball {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 15px;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .ball.yellow { background-color: #fbc400; }
        .ball.blue { background-color: #69c8f2; }
        .ball.red { background-color: #ff7272; }
        .ball.grey { background-color: #aaaaaa; }
        .ball.green { background-color: #b0d840; }

        .plus-sign {
            font-size: 20px;
            font-weight: bold;
            color: #999;
            margin: 0 5px;
        }

        .bonus-label {
            font-size: 10px;
            color: #888;
            margin-left: -4px;
            margin-right: 4px;
        }

        /* Taste Test Styles */
        #image-container {
            width: 400px;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #image-preview {
            max-width: 100%;
            max-height: 100%;
        }

        #label-container {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }

        input[type="file"] {
            margin-top: 20px;
        }

        /* General Button Styles */
        button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            margin-top: 20px;
        }
        button:hover { background-color: #3367d6; transform: translateY(-2px); }
        button:active { transform: translateY(0); }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #eee;
        }
        body.dark-mode .main-container {
            background: #2c2c2c;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        body.dark-mode h1 {
            color: #eee;
        }
        body.dark-mode .controls {
            background-color: #333;
        }
        body.dark-mode .control-item {
            color: #ddd;
        }
        body.dark-mode .lotto-row {
            background-color: #383838;
            border-color: #444;
        }
        body.dark-mode .plus-sign {
            color: #ccc;
        }
        
    </style>
</head>
<body>
    <div class="main-container">
        <div class="tabs">
            <button class="tab-button active" onclick="openTab('lotto')">ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</button>
            <button class="tab-button" onclick="openTab('taste-test')">ì·¨í–¥ í…ŒìŠ¤íŠ¸</button>
        </div>

        <div id="lotto-tab" class="tab-content active">
            <h1>ğŸ° ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</h1>
            <div class="controls">
                <div class="control-item">
                    <label for="gameCount">ê²Œì„ ìˆ˜:</label>
                    <select id="gameCount">
                        <option value="1">1ê²Œì„</option>
                        <option value="2">2ê²Œì„</option>
                        <option value="3">3ê²Œì„</option>
                        <option value="4">4ê²Œì„</option>
                        <option value="5" selected>5ê²Œì„</option>
                    </select>
                </div>
                <div class="control-item">
                    <input type="checkbox" id="bonusToggle" checked>
                    <label for="bonusToggle">ë³´ë„ˆìŠ¤ ë²ˆí˜¸ í¬í•¨</label>
                </div>
            </div>
            <div class="result-area" id="result">
                <p style="color:#aaa;">'ë²ˆí˜¸ ìƒì„±í•˜ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
            </div>
            <button onclick="generateLotto()">ë²ˆí˜¸ ìƒì„±í•˜ê¸°</button>
        </div>

        <div id="taste-test-tab" class="tab-content">
            <h1>ğŸ“¸ ìë™ì°¨ vs ì˜¤í† ë°”ì´, ë‹¹ì‹ ì˜ ì·¨í–¥ì€?</h1>
            <p>ìë™ì°¨ë‚˜ ì˜¤í† ë°”ì´ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”!</p>
            <input type="file" id="image-upload" accept="image/*">
            <div id="image-container">
                <img id="image-preview" src="" alt="Image preview">
            </div>
            <button type="button" onclick="predict()">íŒë³„í•˜ê¸°</button>
            <div id="label-container"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        // --- Tab Handling ---
        function openTab(tabName) {
            let i, tabcontent, tabbuttons;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tabbuttons = document.getElementsByClassName("tab-button");
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }
            document.getElementById(tabName + '-tab').style.display = "block";
            event.currentTarget.className += " active";
        }
        document.getElementById('lotto-tab').style.display = "block";


        // --- Lotto Generator ---
        function generateLotto() {
            const gameCount = parseInt(document.getElementById('gameCount').value);
            const includeBonus = document.getElementById('bonusToggle').checked;
            const resultDiv = document.getElementById('result');
            const rowLabels = ['A', 'B', 'C', 'D', 'E'];
            resultDiv.innerHTML = '';
            for (let i = 0; i < gameCount; i++) {
                const numbers = new Set();
                while (numbers.size < 6) {
                    numbers.add(Math.floor(Math.random() * 45) + 1);
                }
                const mainNumbers = Array.from(numbers).sort((a, b) => a - b);
                let bonusNumber = null;
                if (includeBonus) {
                    while (true) {
                        const tempBonus = Math.floor(Math.random() * 45) + 1;
                        if (!numbers.has(tempBonus)) {
                            bonusNumber = tempBonus;
                            break;
                        }
                    }
                }
                const rowDiv = document.createElement('div');
                rowDiv.classList.add('lotto-row');
                const labelSpan = document.createElement('span');
                labelSpan.classList.add('row-label');
                labelSpan.innerText = rowLabels[i];
                rowDiv.appendChild(labelSpan);
                const ballsWrapper = document.createElement('div');
                ballsWrapper.classList.add('balls-wrapper');
                mainNumbers.forEach(num => {
                    ballsWrapper.appendChild(createBall(num));
                });
                if (includeBonus && bonusNumber !== null) {
                    const plusSpan = document.createElement('span');
                    plusSpan.classList.add('plus-sign');
                    plusSpan.innerText = '+';
                    ballsWrapper.appendChild(plusSpan);
                    ballsWrapper.appendChild(createBall(bonusNumber));
                    const bonusText = document.createElement('span');
                    bonusText.classList.add('bonus-label');
                    bonusText.innerText = 'ë³´ë„ˆìŠ¤';
                    ballsWrapper.appendChild(bonusText);
                }
                rowDiv.appendChild(ballsWrapper);
                resultDiv.appendChild(rowDiv);
            }
        }
        function createBall(number) {
            const ball = document.createElement('div');
            ball.classList.add('ball');
            ball.innerText = number;
            if (number <= 10) ball.classList.add('yellow');
            else if (number <= 20) ball.classList.add('blue');
            else if (number <= 30) ball.classList.add('red');
            else if (number <= 40) ball.classList.add('grey');
            else ball.classList.add('green');
            return ball;
        }

        // --- Taste Test (Teachable Machine) ---
        const URL = "https://teachablemachine.withgoogle.com/models/7mnGnsF1T/";
        let model, labelContainer, maxPredictions;
        async function initTasteTest() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
            labelContainer = document.getElementById("label-container");
            for (let i = 0; i < maxPredictions; i++) {
                labelContainer.appendChild(document.createElement("div"));
            }
            const imageUpload = document.getElementById("image-upload");
            const imagePreview = document.getElementById("image-preview");
            imageUpload.addEventListener("change", (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        imagePreview.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        async function predict() {
            const image = document.getElementById("image-preview");
            const prediction = await model.predict(image);
            for (let i = 0; i < maxPredictions; i++) {
                const classPrediction =
                    prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                labelContainer.childNodes[i].innerHTML = classPrediction;
            }
        }
        initTasteTest();
    </script>
</body>
</html>